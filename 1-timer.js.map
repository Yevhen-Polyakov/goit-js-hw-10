{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from  \"izitoast\";\nimport  \"izitoast/dist/css/iziToast.min.css\";\n\nconst input = document.querySelector(\"#datetime-picker\")\nconst startBtn = document.querySelector(\"button[data-start]\")\nconst day = document.querySelector(\"span[data-days]\")\nconst hourse = document.querySelector(\"span[data-hours]\")\nconst min = document.querySelector(\"span[data-minutes]\")\nconst sec = document.querySelector(\"span[data-seconds]\")\n\nstartBtn.classList.add(\"is-not-active\")\nstartBtn.disabled = true\n\nlet userSelectedDate = null\nlet timerId = null\n\nconst options = {\n   enableTime: true,\n   time_24hr: true,\n   defaultDate: new Date(),\n   minuteIncrement: 1,\n   onClose(selectedDates) {\n    const pickedDate = selectedDates[0];\n    const isPast = pickedDate < new Date()\n  \n    if(isPast){\n        iziToast.error({\n          id: \"date-error\",\n          class: \"toast-error\",\n          backgroundColor: \"red\",\n          messageColor: \"#fff\",\n          position: \"topRight\",\n          timeout: false,\n          close: true,\n          message: \"Please choose a date in the future\"\n        })\n      startBtn.classList.add(\"is-not-active\")\n      startBtn.disabled = true\n      userSelectedDate = null\n      \n    } else {\n      const errorToast = document.querySelector(\"#date-error\")\n      if (errorToast) {\n        iziToast.hide({}, errorToast)\n      }\n      startBtn.classList.remove(\"is-not-active\")\n      startBtn.disabled = false\n      userSelectedDate = pickedDate\n    }\n  },\n};\n\nflatpickr(\"#datetime-picker\", options)\n\nstartBtn.addEventListener(\"click\", handleStart)\n\nfunction handleStart(){\n  if(!userSelectedDate || timerId)return\n \n  input.classList.add(\"is-not-active\")\n  input.disabled = true\n  startBtn.classList.add(\"is-not-active\")\n  startBtn.disabled = true\n  \n  updateTime()\n  timerId = setInterval(updateTime, 1000)\n  \n}\n\nfunction updateTime(){\n  const diff = userSelectedDate.getTime() - Date.now()\n\n  if(diff <= 0){\n    clearInterval(timerId)\n    timerId = null\n    day.textContent = \"00\"\n    hourse.textContent = \"00\"\n    min.textContent = \"00\"\n    sec.textContent = \"00\"\n    input.classList.remove(\"is-not-active\")\n    input.disabled = false\n    startBtn.classList.add(\"is-not-active\")\n    startBtn.disabled = true\n    return\n  }\n\n  const {days, hours, minutes, seconds} = convertMs(diff)\n  day.textContent = addLeadingZero(days)\n  hourse.textContent = addLeadingZero(hours)\n  min.textContent = addLeadingZero(minutes)\n  sec.textContent = addLeadingZero(seconds)\n        \n} \n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value){\n  return String(value).padStart(2, \"0\")\n}\n\n\n\n\n\n"],"names":["input","startBtn","day","hourse","min","sec","userSelectedDate","timerId","options","selectedDates","pickedDate","iziToast","errorToast","flatpickr","handleStart","updateTime","diff","days","hours","minutes","seconds","convertMs","addLeadingZero","ms","value"],"mappings":"+IAMA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAM,SAAS,cAAc,iBAAiB,EAC9CC,EAAS,SAAS,cAAc,kBAAkB,EAClDC,EAAM,SAAS,cAAc,oBAAoB,EACjDC,EAAM,SAAS,cAAc,oBAAoB,EAEvDJ,EAAS,UAAU,IAAI,eAAe,EACtCA,EAAS,SAAW,GAEpB,IAAIK,EAAmB,KACnBC,EAAU,KAEd,MAAMC,EAAU,CACb,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACtB,MAAMC,EAAaD,EAAc,CAAC,EAGlC,GAFeC,EAAa,IAAI,KAG5BC,EAAS,MAAM,CACb,GAAI,aACJ,MAAO,cACP,gBAAiB,MACjB,aAAc,OACd,SAAU,WACV,QAAS,GACT,MAAO,GACP,QAAS,oCACnB,CAAS,EACHV,EAAS,UAAU,IAAI,eAAe,EACtCA,EAAS,SAAW,GACpBK,EAAmB,SAEd,CACL,MAAMM,EAAa,SAAS,cAAc,aAAa,EACnDA,GACFD,EAAS,KAAK,CAAE,EAAEC,CAAU,EAE9BX,EAAS,UAAU,OAAO,eAAe,EACzCA,EAAS,SAAW,GACpBK,EAAmBI,CACpB,CACF,CACH,EAEAG,EAAU,mBAAoBL,CAAO,EAErCP,EAAS,iBAAiB,QAASa,CAAW,EAE9C,SAASA,GAAa,CACjB,CAACR,GAAoBC,IAExBP,EAAM,UAAU,IAAI,eAAe,EACnCA,EAAM,SAAW,GACjBC,EAAS,UAAU,IAAI,eAAe,EACtCA,EAAS,SAAW,GAEpBc,EAAY,EACZR,EAAU,YAAYQ,EAAY,GAAI,EAExC,CAEA,SAASA,GAAY,CACnB,MAAMC,EAAOV,EAAiB,QAAO,EAAK,KAAK,IAAK,EAEpD,GAAGU,GAAQ,EAAE,CACX,cAAcT,CAAO,EACrBA,EAAU,KACVL,EAAI,YAAc,KAClBC,EAAO,YAAc,KACrBC,EAAI,YAAc,KAClBC,EAAI,YAAc,KAClBL,EAAM,UAAU,OAAO,eAAe,EACtCA,EAAM,SAAW,GACjBC,EAAS,UAAU,IAAI,eAAe,EACtCA,EAAS,SAAW,GACpB,MACD,CAED,KAAM,CAAC,KAAAgB,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAIC,EAAUL,CAAI,EACtDd,EAAI,YAAcoB,EAAeL,CAAI,EACrCd,EAAO,YAAcmB,EAAeJ,CAAK,EACzCd,EAAI,YAAckB,EAAeH,CAAO,EACxCd,EAAI,YAAciB,EAAeF,CAAO,CAE1C,CAEA,SAASC,EAAUE,EAAI,CAQrB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAE1BL,EAAQ,KAAK,MAAOK,EAAK,MAAO,IAAI,EAEpCJ,EAAU,KAAK,MAAQI,EAAK,MAAO,KAAQ,GAAM,EAEjDH,EAAU,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASE,EAAeE,EAAM,CAC5B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}